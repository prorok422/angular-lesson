<ul>
  <li *ngFor="let item of data; let i = index">
    <button (click)="toggle[i] = !toggle[i]">{{item.title}}</button>
    <div *ngIf="item.children && toggle[i]">
      <ng-container *ngTemplateOutlet="tree; context: { $implicit: item.children, idx: i }"></ng-container>
    </div>
  </li>
</ul>

<ng-template #tree let-allItems let-idx="idx">
  <ul>
    <li *ngFor="let item of allItems">
      {{item.name}}
    </li>
  </ul>
</ng-template>
